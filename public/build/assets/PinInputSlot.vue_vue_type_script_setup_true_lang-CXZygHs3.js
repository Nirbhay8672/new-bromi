import{u as K,V as G,a as J,c as U,b as W,g as X,d as Q,f as T}from"./index-D20Otgcz.js";import{c as D}from"./utils-TfETDaq2.js";import{a as Y,g as N}from"./index-x9fwfB49.js";import{d as V,D as c,J as R,x as h,a as m,A as q,c as j,f as Z,F as O,i as ee,I as te,r as ae,w as A,E as M,b as le,u,o as re,H as ne,X as S,n as ue}from"./app-C8I2FI9v.js";import{P as F}from"./index-CX1Ge313.js";import{u as se}from"./useForwardExpose-D3Y2KD0a.js";var oe=V({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(d){const e=d,{primitiveElement:a,currentElement:n}=K(),r=c(()=>e.checked??e.value);return R(r,(s,i)=>{if(!n.value)return;const f=n.value,g=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(g,"value").set;if(E&&s!==i){const b=new Event("input",{bubbles:!0}),v=new Event("change",{bubbles:!0});E.call(f,s),f.dispatchEvent(b),f.dispatchEvent(v)}}),(s,i)=>(m(),h(G,q({ref_key:"primitiveElement",ref:a},{...e,...s.$attrs},{as:"input"}),null,16))}}),z=oe,ie=V({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(d){const e=d,a=c(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),n=c(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"||e.value===null||e.value===void 0?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((r,s)=>typeof r=="object"?Object.entries(r).map(([i,f])=>({name:`${e.name}[${s}][${i}]`,value:f})):{name:`${e.name}[${s}]`,value:r}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([r,s])=>({name:`${e.name}[${r}]`,value:s})):[]);return(r,s)=>(m(),j(O,null,[Z(" We render single input if it's required "),a.value?(m(),h(z,q({key:r.name},{...e,...r.$attrs},{name:r.name,value:r.value}),null,16,["name","value"])):(m(!0),j(O,{key:1},ee(n.value,i=>(m(),h(z,q({key:i.name},{ref_for:!0},{...e,...r.$attrs},{name:i.name,value:i.value}),null,16,["name","value"]))),128))],2112))}}),de=ie;const[pe,ce]=U("PinInputRoot");var fe=V({inheritAttrs:!1,__name:"PinInputRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:Array,required:!1},placeholder:{type:String,required:!1,default:""},mask:{type:Boolean,required:!1},otp:{type:Boolean,required:!1},type:{type:null,required:!1,default:"text"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","complete"],setup(d,{emit:e}){const a=d,n=e,{mask:r,otp:s,placeholder:i,type:f,disabled:g,dir:B}=te(a),{forwardRef:E}=se(),b=J(B),v=Y(a,"modelValue",n,{defaultValue:a.defaultValue??[],passive:a.modelValue===void 0}),P=c(()=>Array.isArray(v.value)?[...v.value]:[]),I=ae(new Set);function C(p){I.value.add(p)}const k=c(()=>a.type==="number"),w=c(()=>P.value.filter(_=>!!_||k.value&&_===0).length===I.value.size);return R(v,()=>{w.value&&n("complete",v.value)},{deep:!0}),ce({modelValue:v,currentModelValue:P,mask:r,otp:s,placeholder:i,type:f,dir:b,disabled:g,isCompleted:w,inputElements:I,onInputElementChange:C,isNumericMode:k}),(p,_)=>(m(),h(u(F),q(p.$attrs,{ref:u(E),dir:u(b),"data-complete":w.value?"":void 0,"data-disabled":u(g)?"":void 0}),{default:A(()=>[M(p.$slots,"default",{modelValue:u(v)}),le(de,{id:p.id,as:"input",feature:"focusable",tabindex:"-1",value:P.value.join(""),name:p.name??"",disabled:u(g),required:p.required,onFocus:_[0]||(_[0]=x=>Array.from(I.value)?.[0]?.focus())},null,8,["id","value","name","disabled","required"])]),_:3},16,["dir","data-complete","data-disabled"]))}}),ve=fe,me=V({__name:"PinInputInput",props:{index:{type:Number,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},setup(d){const e=d,a=pe(),n=c(()=>Array.from(a.inputElements.value)),r=c(()=>a.currentModelValue.value[e.index]),s=c(()=>e.disabled||a.disabled.value),i=c(()=>a.otp.value),f=c(()=>a.mask.value),{primitiveElement:g,currentElement:B}=K();function E(t){const l=t.target;if((t.data?.length??0)>1){p(l.value);return}if(a.isNumericMode.value&&!/^\d*$/.test(l.value)){l.value=l.value.replace(/\D/g,"");return}l.value=t.data??"",x(e.index,l.value);const o=n.value[e.index+1];o&&o.focus()}function b(){const t=B.value;ue(()=>{t&&!t.value&&(t.placeholder=a.placeholder.value)})}function v(t){W(t,X(),void 0,{itemsArray:n.value,focus:!0,loop:!1,arrowKeyOptions:"horizontal",dir:a.dir.value})}function P(t){if(t.preventDefault(),t.target.value)x(e.index,"");else{const y=n.value[e.index-1];y&&(y.focus(),x(e.index-1,""))}}function I(t){t.key==="Delete"&&(t.preventDefault(),x(e.index,""))}function C(t){const l=t.target;l.setSelectionRange(1,1),l.value||(l.placeholder="")}function k(t){b()}function w(t){t.preventDefault();const l=t.clipboardData;if(!l)return;const o=l.getData("text");p(o)}function p(t){const l=[...a.currentModelValue.value],o=t.length>=n.value.length?0:e.index,y=Math.min(o+t.length,n.value.length);for(let $=o;$<y;$++){const L=n.value[$],H=t[$-o];a.isNumericMode.value&&!/^\d*$/.test(H)||(l[$]=H,L.focus())}a.modelValue.value=l,n.value[y]?.focus()}function _(t){let l=t.length-1;for(;l>=0&&t[l]==="";)t.pop(),l--;return t}function x(t,l){const o=[...a.currentModelValue.value];if(a.isNumericMode.value){const y=+l;l===""||isNaN(y)?delete o[t]:o[t]=y}else o[t]=l;a.modelValue.value=_(o)}return R(r,()=>{r.value||b()}),re(()=>{a.onInputElementChange(B.value)}),ne(()=>{a.inputElements?.value.delete(B.value)}),(t,l)=>(m(),h(u(F),{ref_key:"primitiveElement",ref:g,autocapitalize:"none",as:t.as,"as-child":t.asChild,autocomplete:i.value?"one-time-code":"false",type:f.value?"password":"text",inputmode:u(a).isNumericMode.value?"numeric":"text",pattern:u(a).isNumericMode.value?"[0-9]*":void 0,placeholder:u(a).placeholder.value,value:r.value,disabled:s.value,"data-disabled":s.value?"":void 0,"data-complete":u(a).isCompleted.value?"":void 0,"aria-label":`pin input ${t.index+1} of ${n.value.length}`,onInput:l[0]||(l[0]=o=>E(o)),onKeydown:[S(v,["left","right","up","down","home","end"]),S(P,["backspace"]),S(I,["delete"])],onFocus:C,onBlur:k,onPaste:w},{default:A(()=>[M(t.$slots,"default")]),_:3},8,["as","as-child","autocomplete","type","inputmode","pattern","placeholder","value","disabled","data-disabled","data-complete","aria-label"]))}}),ye=me;const Be=V({__name:"PinInput",props:{modelValue:{default:()=>[]},defaultValue:{},placeholder:{},mask:{type:Boolean},otp:{type:Boolean},type:{},dir:{},disabled:{type:Boolean},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue","complete"],setup(d,{emit:e}){const a=d,n=e,r=N(a,"class"),s=Q(r,n);return(i,f)=>(m(),h(u(ve),q({"data-slot":"pin-input"},u(s),{class:u(D)("flex items-center gap-2 has-disabled:opacity-50 disabled:cursor-not-allowed",a.class)}),{default:A(()=>[M(i.$slots,"default")]),_:3},16,["class"]))}}),Ee=V({__name:"PinInputGroup",props:{asChild:{type:Boolean},as:{},class:{}},setup(d){const e=d,a=N(e,"class"),n=T(a);return(r,s)=>(m(),h(u(F),q({"data-slot":"pin-input-group"},u(n),{class:u(D)("flex items-center",e.class)}),{default:A(()=>[M(r.$slots,"default")]),_:3},16,["class"]))}}),Ie=V({__name:"PinInputSlot",props:{index:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(d){const e=d,a=N(e,"class"),n=T(a);return(r,s)=>(m(),h(u(ye),q({"data-slot":"pin-input-slot"},u(n),{class:u(D)("border-input focus:border-ring focus:ring-ring/50 focus:aria-invalid:ring-destructive/20 dark:bg-input/30 dark:focus:aria-invalid:ring-destructive/40 aria-invalid:border-destructive focus:aria-invalid:border-destructive relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none text-center first:rounded-l-md first:border-l last:rounded-r-md focus:z-10 focus:ring-[3px]",e.class)}),null,16,["class"]))}});export{Be as _,Ee as a,Ie as b};
